# 4most-4gp
This is the code for the IWG7 Galactic pipeline for the 4MOST multi-object spectrograph.

This code is under active development, but mostly doesn't exist yet.

There are no stable releases yet, because this code isn't stable.

# Getting started

To use this code, follow these steps in a Linux shell:

```
# Make sure you have various packages installed
apt-get install python-sqlite3 mysql-server
 

# Check out code from GitHub
git clone https://github.com/dcf21/4most-4gp.git
 
# Set up a python virtual environment
virtualenv virtualenv
source virtualenv/bin/activate
 
# Install 4GP code
cd src/pythonModules/fourgp_speclib
python setup.py install
cd ../fourgp_rv
python setup.py install
cd ../fourgp_degrade
python setup.py install
cd ../fourgp_cannon
python setup.py install
 
# Create API documentation using sphinx
pip install Sphinx
cd ../../../docs
make html
 
# View HTML documentation
# At this point you need to edit your Apache configuration and point a webserver at the directory
# docs/_build/html
```

# Further information

Once you've followed the steps above, you should have lots of HTML documentation of the 4GP API autogenerated by Sphinx.

# Testing your installation

The 4GP code comes with a set of unit tests to validate your installation.

The tests include building spectrum libraries using both SQLite and MySQL databases. For all the tests to pass, you need to create a local MySQL database called ```fourgp_unittest```. A MySQL user account with username ```fourgp_unittest``` and password ```fourgp_unittest``` is needed with full access to this database:
 
```
CREATE DATABASE fourgp_unittest;
GRANT ALL ON fourgp_unittest.* TO 'fourgp_unittest'@'localhost';
```

You can run the unit tests as follows:

```
source virtualenv/bin/activate
cd src/pythonModules/fourgp_speclib/fourgp_speclib/tests
python -m unittest discover
```

# Contact details
This code is maintained by:

Dominic Ford  
Lund Observatory  
Box 43  
SE-221 00 Lund  
Sweden
